<!DOCTYPE html>
<html lang="en">

<head>
  <title>Trakanta</title>
  <%- include('../head') %>
  <!-- datatable -->
  <link href="/css/addons/datatables.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"
    integrity="sha512-rKFvwjvE4liWPlFnvH4ZhRDfNZ9FOpdkD/BU5gAIA3VS3vOQrQ5BjKgbO3kxebKhHdHcNUHLqxQYSoxee9UwgA=="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.js"
    integrity="sha512-/McISOEKVzVvgu12/1Hk8dSrbKBShnKn79/R50ysl5qWR1zgj347kOT8LJJvInxHDSPmiBG9vg5AhMx6rcELJg=="
    crossorigin="anonymous"></script>
  <!-- Your custom styles (optional) -->
  <style>
    th {
      white-space: nowrap;
    }

    .scroll {
      overflow: scroll;
      height: 400px;
    }

    .double-nav .breadcrumb-dn {
      color: #fff;
    }

    .side-nav.wide.slim .sn-ad-avatar-wrapper a span {
      display: none;
    }

    .popup {
      width: 900px;
      margin: auto;
      text-align: center
    }

    .popup img {
      width: 200px;
      height: 200px;
      cursor: pointer
    }

    .show {
      z-index: 999;
      display: none;
    }

    .show .overlay {
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, .66);
      position: absolute;
      top: 0;
      left: 0;
    }

    .show .img-show {
      width: 600px;
      height: 400px;
      background: #FFF;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      overflow: hidden
    }

    .img-show span {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 99;
      cursor: pointer;
    }

    table th:first-child {
      border-radius: 10px 0 0 10px;
    }

    table th:last-child {
      border-radius: 0 10px 10px 0;
    }

    .img-show img {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    .mdb-skin .side-nav .collapsible li .collapsible-header:hover {
      border-radius: 0px 9px 9px 0px;
      color: #ddba0b;
      margin-top: 5px;
      margin-right: 40px;
      background-color: rgba(255, 255, 255, 1);
    }

    .total-price {
      width: 143px;
      height: 47px;
      margin: 35px 13.5px 15px 11.5px;
      padding: 8px 46.5px 8px 41.5px;
      border-radius: 10px;
      background-color: #b5b5b5;
    }
  </style>
</head>

<body class="fixed-sn mdb-skin">
  <%- include('navigation') %>

  <!--Main Layout-->
  <main>
    <div class="container-fluid " id="app">
      <h2>สมาชิก</h2>

      <!-- Button trigger modal -->
      <!-- Button trigger modal -->
      <div class="d-flex">
        <div>
          <button type="button" style="border-radius: 8px; " class="btn btn-success font-18" data-toggle="modal"
            data-target="#insertOrder">
            สร้างสมาชิก
          </button>
        </div>
        <div class="ml-auto">
          <button type="button" style="border-radius: 8px; background-color: #e7b000; color: #fff;"
            class="btn font-18" data-toggle="modal" data-target="#exampleModal">
            นำเข้าไฟล์
          </button>
        </div>
      </div>

      <!-- Create User Modal -->
      <div class="modal fade mt-5" id="insertOrder" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">สร้างสมาชิก/แก้ไข</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form action="/member/insertmember" method="POST">
                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputName" style="position: initial; justify-content: end;">ชื่อ-นามสกุล <span style="color: red;">*</span></label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <input type="text" class="form-control" name="member_name" v-model="member_name" id="inputName"
                        placeholder="ชื่อ-นามสกุล" required>
                    </div>
                  </div>
                </div>
                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputEmail" style="position: initial; justify-content: end;">วันเกิด</label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <input type="date" class="form-control" max="<%= moment().format('YYYY-MM-DD') %>" value="<%= moment().format('YYYY-MM-DD') %>" name="birthdate" id="inputEmail"
                        placeholder="ชื่อ เฟสบุค" >
                    </div>
                  </div>
                </div>
                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputEmail" style="position: initial; justify-content: end;">ชื่อ เฟสบุค 1 <span style="color: red;">*</span></label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <!-- <div class="chips chips-placeholder text-left"></div>
                      <div id="myTags"></div> -->
                      <input type="text" class="form-control" name="facebook_name_a" v-model="facebook_name_a"
                        id="inputEmail" placeholder="ชื่อ เฟสบุค 1" required>
                    </div>
                  </div>
                </div>
                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputEmail" style="position: initial; justify-content: end;">ชื่อ เฟสบุค 2</label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <!-- <div class="chips chips-placeholder text-left"></div>
                      <div id="myTags"></div> -->
                  
                      <input type="text" class="form-control" name="facebook_name_b" v-model="facebook_name_b"
                        id="inputEmail" placeholder="ชื่อ เฟสบุค 2">
                       
                    </div>
                  </div>
                </div>
                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputEmail" style="position: initial; justify-content: end;">ชื่อ เฟสบุค 3</label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <!-- <div class="chips chips-placeholder text-left"></div>
                      <div id="myTags"></div> -->
                      <input type="text" class="form-control" name="facebook_name_c" v-model="facebook_name_c"
                        id="inputEmail" placeholder="ชื่อ เฟสบุค 3">
                    </div>
                  </div>
                </div>
                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputTelno" style="position: initial; justify-content: end;">อีเมล</label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <input type="email" class="form-control" id="member_email" name="member_email"
                        v-model="member_email" placeholder="อีเมล">
                    </div>
                  </div>
                </div>

                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputTelno" style="position: initial; justify-content: end;">เบอร์โทร</label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <input type="tel" class="form-control" id="inputTelno" name="member_telno" v-model="member_telno"
                        @keypress="isNumber($event)" placeholder="เบอร์โทร" maxlength="10" >
                    </div>
                  </div>
                </div>
                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputTelno" style="position: initial; justify-content: end;">ที่อยู่ 1 <span style="color: red;">*</span></label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <input type="text" class="form-control" id="member_address" name="member_address"
                        v-model="member_address" placeholder="ที่อยู่" required>
                    </div>
                  </div>
                </div>

                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputUsername" style="position: initial; justify-content: end;">ที่อยู่ 2</label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <input type="text" class="form-control" name="sec_member_address" v-model="sec_member_address"
                        id="inputUsername" placeholder="ที่อยู่สำรอง">
                    </div>
                  </div>
                </div>

                <div class="col-md-12 text-center">
                  <div class="form-group row">
                    <div class="col-md-4 text-right my-auto">
                      <label for="inputPassword" style="position: initial; justify-content: end;">หมายเหตุ</label>
                    </div>
                    <div class="col-md-8 mt-1">
                      <input type="text" class="form-control" name="member_detail" v-model="member_detail"
                        id="inputPassword" placeholder="หมายเหตุ">
                    </div>

                  </div>
                </div>

                <div class="text-center">
                  <button v-if="member_name!=''&&member_telno!=''&&member_address!=''"
                    style="background-color: black; color: #fff; border-radius: 0px;" type="submit"
                    class="btn">บันทึก</button>
                  <button v-else="check==false" style="background-color: black; color: #fff; border-radius: 0px;"
                    type="submit" class="btn" >บันทึก</button>
                </div>

              </form>
            </div>


          </div>
        </div>
      </div>
      <!-- End Create User -->

      <!-- Modal -->
      <div class="modal fade mt-5" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">UPLOAD</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <h3 class='col-12 modal-title text-center'>
                <form class="md-form">
                  <div class="file-field text-center mx-5 border" style="border-radius: 8px;">
                    <div class="btn btn-primary btn-md float-left">
                      <span>Choose file</span>
                      <input type="file">
                    </div>

                    <div class="file-path-wrapper">
                      <input id="upload-csv" type="file" accept=".csv">
                      <input class="file-path validate" style="font-size: 1.2rem;" type="text" style="
        overflow: visible;
        text-align: center;
    " placeholder="Upload your file">
                    </div>
                  </div>
                </form>
                <button type="button" v-on:click="_upload()" id="btn-upload-csv"
                  class="btn bg-dark text-white mt-5">Upload
                  File
                </button>
            </div>
            </form>
            </h3>
          </div>
        </div>
      </div>
      <div class="card card-cascade narrower mt-5">
        <section>
          <div class="row">
            <div class="col-12">
              <div class="card-body">
                <div class="table-responsive text-nowrap">
                  <span class="table-add float-right mb-3 mr-2" style="margin-top: 4px"><a href="#!"
                      class="text-success" data-toggle="modal" data-target="#modalinsert"><i class="fas fa-plus fa-2x"
                        aria-hidden="true"></i></a></span>
                  <div class="my-5">

                  </div>

                  <table id="tbl-data"></table>
                  <table id="example" class="table table-striped row-border mt-3" cellspacing="0" width="100%">
                    <thead style="border-radius: 10px;">
                      <tr class="text-center" style="color: #fff;
                      border-radius: 10px;
                      background-color: #9e7d35;">

                        <th class="font-18">ชื่อเฟสบุ๊ค</th>
                        <th class="font-18">ที่อยู่ 1</th>
                        <th class="font-18">เบอร์โทร</th>
                        <th class="font-18">หมายเหตุ</th>
                        <th class="font-18">เวลาที่แก้ไขล่าสุด</th>
                        <th class="font-18">การจัดการ</th>

                      </tr>
                    </thead>
                    <tfoot>
                      <tr>

                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                    </tfoot>
                    <tbody class="text-center">
                      <% for(const [key, member] of Object.entries(data))  {%>
                      <tr>
                        <td class="font-18"><%= member.facebook_name_a %></td>
                        <td class="font-18"><%= member.member_address %></td>
                        <td class="font-18"><%= member.member_telno %></td>
                        <td class="font-18"><%= member.member_detail %></td>

                        <td class="text-center font-18"><%= moment(member.date).format('DD MMMM  YYYY, h:mm:ss a'); %></td>
                        <td class="text-center font-18"><i class="far fa-edit fa-lg grow"
                            v-on:click="editMember('<%= member._id %>','<%= member.member_name %>','<%= member.birthdate %>','<%= member.facebook_name_a %>','<%= member.facebook_name_b %>','<%= member.facebook_name_c %>','<%= member.member_email %>','<%= member.member_telno %>','<%= member.member_address %>','<%= member.sec_member_address %>','<%= member.member_totalprice %>','<%= member.member_detail %>')"></i>
                          <i class="far fa-trash-alt fa-lg grow" style="color: red;"
                            v-on:click="deleteMember('<%= member._id %>')"></i>
                        </td>
                      </tr>
                      <%}%>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div style="height: 300px"></div>
<!-- Edit Member Modal -->
<div class="modal fade mt-5" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog modal-lg">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">สร้างสมาชิก/แก้ไข</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form action="/member/editmember" method="POST">
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputName" style="position: initial; justify-content: end;">ชื่อ-นามสกุล</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="text" class="form-control" name="edit_member_name" v-model="edit_member_name" id="inputName"
                placeholder="ชื่อ-นามสกุล" >
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputEmail" style="position: initial; justify-content: end;">วันเกิด</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="date" class="form-control" name="edit_birthdate" v-model="edit_birthdate" id="inputEmail"
                placeholder="ชื่อ เฟสบุค" required>
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputEmail" style="position: initial; justify-content: end;">ชื่อ เฟสบุค 1</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="text" class="form-control" name="edit_facebook_name_a" v-model="edit_facebook_name_a" id="inputEmail"
                placeholder="ชื่อ เฟสบุค" required>
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputEmail" style="position: initial; justify-content: end;">ชื่อ เฟสบุค 2</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="text" class="form-control" name="edit_facebook_name_b" v-model="edit_facebook_name_b" id="inputEmail"
                placeholder="ชื่อ เฟสบุค" >
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputEmail" style="position: initial; justify-content: end;">ชื่อ เฟสบุค 3</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="text" class="form-control" name="edit_facebook_name_c" v-model="edit_facebook_name_c" id="inputEmail"
                placeholder="ชื่อ เฟสบุค" >
            </div>
          </div>
        </div>
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputTelno" style="position: initial; justify-content: end;">อีเมล</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="email" class="form-control" id="edit_member_email" name="edit_member_email" v-model="edit_member_email"
                 placeholder="อีเมล" required>
            </div>
          </div>

        </div>
        
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputTelno" style="position: initial; justify-content: end;">เบอร์โทร</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="tel" class="form-control" id="inputTelno" name="edit_member_telno" v-model="edit_member_telno"
                          @keypress="isNumber($event)" placeholder="เบอร์โทร" maxlength="10">
            </div>
          </div>

        </div>
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputTelno" style="position: initial; justify-content: end;">ที่อยู่ 1</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="text" class="form-control" id="edit_member_address" name="edit_member_address" v-model="edit_member_address"
               placeholder="ที่อยู่" required>
            </div>
          </div>

        </div>
        <input type="hidden" name="id" v-model="edit_id">
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputUsername" style="position: initial; justify-content: end;">ที่อยู่ 2</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="text" class="form-control" name="edit_sec_member_address" v-model="edit_sec_member_address" id="inputUsername"
                placeholder="ที่อยู่สำรอง">
            </div>
          </div>
        </div>
       
        <div class="col-md-12 text-center">
          <div class="form-group row">
            <div class="col-md-4 text-right my-auto">
              <label for="inputPassword" style="position: initial; justify-content: end;">หมายเหตุ</label>
            </div>
            <div class="col-md-8 mt-1">
              <input type="text" class="form-control" name="edit_member_detail" v-model="edit_member_detail"
                id="inputPassword" placeholder="หมายเหตุ" >
            </div>
            
          </div>
        </div>
        
        <div class="text-center">
          <button v-if="edit_member_address!=''" style="background-color: black; color: #fff; border-radius: 0px;" type="submit" class="btn">บันทึก</button>
          <button v-else="check==false" style="background-color: black; color: #fff; border-radius: 0px;" type="submit" class="btn" disabled>บันทึก</button>
        </div>

      </form>
    </div>


  </div>
</div>
</div>
<!-- End Edit Member -->
    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
      aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            Detail
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Understood</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  </main>
  <!--Main Layout-->
  <%- //include('footer') %>

                      <script src="/js/jquery-3.4.1.min.js"></script>
                      <!-- Bootstrap tooltips -->
                      <script type="text/javascript" src="/js/bootstrap.js"></script>
                      <!-- MDB core JavaScript -->
                      <script type="text/javascript" src="/js/mdb.min.js"></script>
                      <!-- Custom scripts -->
                      <!-- <script type="text/javascript" src="/js/page/nav-active.js"></script> -->
                      <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
                      <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
                      <!-- MDBootstrap Datatables  -->
                      <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

                      <script type="text/javascript" src="/js/addons/datatables.min.js"></script>
                      <!-- sweetalert2 -->
                      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
                      <script type="text/javascript">
                        $(document).ready(function () {
                          // SideNav Initialization
                          $(".button-collapse").sideNav();
                          //data table
                          $('#myModal').on('shown.bs.modal', function () {
                            $('#myInput').trigger('focus')
                          })
                          // DataTable initialisation

                          $('#example').DataTable({
                            "paging": true,
                            "autoWidth": true,
                            "order": [
                              [4, "desc"]
                            ]
                          });

                          $(".dataTables_length").addClass("bs-select");

                          $(".mdb-select").materialSelect();
                          $('.chips-placeholder').materialChip({
                            placeholder: 'Enter a tag',
                            secondaryPlaceholder: ' + Facebook',
                          });

                          var chipClass = $('.chips');
                          var nbChip = 1;
                          chipClass.on('chip.add', function (e, chip) {
                            $('#myTags').append('<input type="hidden" name="mytags[]" value="' + chip.tag +
                              '" id="' + nbChip + '">');
                            nbChip++;
                          });
                        });

                        // MDB Lightbox Init
                        $(function () {
                          $("#mdb-lightbox-ui").load("/mdb-addons/mdb-lightbox-ui.html");
                        });
                        switch (window.location.search) {

                          case "?alert=insert-success":
                            toastr.success("เพิ่มรายชื่อลูกค้าเรียบร้อยค่ะ");
                            break;
                          case "?alert=update-success":
                            toastr.success("ยืนยันการจองเรียบร้อยแล้วค่ะ");
                            break;
                          case "?alert=edit-success":
                            toastr.warning("แก้ข้อมูลลูกค้าเรียบร้อยค่ะ");
                            break;
                          case "?alert=delete-success":
                            toastr.warning("ลบรายข้อมูลสมาชิกสำเร็จ");
                            break;
                          case "?alert=confirm-success":
                            toastr.success("ยืนยันโต๊ะเสร็จสิ้น");
                            break;
                        }

                        function _edit(id, userid) {
                          const swalWithBootstrapButtons = Swal.mixin({
                            customClass: {
                              confirmButton: "btn btn-success",
                              cancelButton: "btn btn-danger",
                            },
                            buttonsStyling: false,
                          });

                          swalWithBootstrapButtons
                            .fire({
                              title: "คุณต้องเปลี่ยนสถานะจอง ?",
                              //text: "You won't be able to revert this!",
                              icon: "warning",
                              showCancelButton: true,
                              confirmButtonText: "ยืนยันการจอง",
                              cancelButtonText: "ยกเลิก",
                              reverseButtons: true,
                            })
                            .then((result) => {
                              if (result.isConfirmed) {
                                window.location.href = "/admin/rev/edit/" + id + "/" + userid;
                              }
                            });
                        }

                        function _approve(id, userid) {
                          const swalWithBootstrapButtons = Swal.mixin({
                            customClass: {
                              confirmButton: "btn btn-success",
                              cancelButton: "btn btn-danger",
                            },
                            buttonsStyling: false,
                          });

                          swalWithBootstrapButtons
                            .fire({
                              title: "คุณต้องการยืนยันการจอง ?",
                              //text: "You won't be able to revert this!",
                              icon: "warning",
                              showCancelButton: true,
                              confirmButtonText: "ยืนยันการจอง",
                              cancelButtonText: "ยกเลิก",
                              reverseButtons: true,
                            })
                            .then((result) => {
                              if (result.isConfirmed) {
                                window.location.href = "/admin/rev/" + id + "/" + userid;
                              }
                            });
                        }

                        function _approveCoupon(id, userid, coupon, amount) {
                          const swalWithBootstrapButtons = Swal.mixin({
                            customClass: {
                              confirmButton: "btn btn-success",
                              cancelButton: "btn btn-danger",
                            },
                            buttonsStyling: false,
                          });
                          swalWithBootstrapButtons
                            .fire({
                              title: "คุณต้องการยืนยันการจอง ?",
                              //text: "You won't be able to revert this!",
                              icon: "warning",
                              showCancelButton: true,
                              confirmButtonText: "ยืนยันการจอง",
                              cancelButtonText: "ยกเลิก",
                              reverseButtons: true,
                            })
                            .then((result) => {
                              if (result.isConfirmed) {
                                window.location.href = "/admin/rev/used/" + id + "/" + userid + "/" + coupon + "/" +
                                  amount;
                              }
                            });
                        }

                        function _approvetable(id, userid) {
                          const swalWithBootstrapButtons = Swal.mixin({
                            customClass: {
                              confirmButton: "btn btn-success",
                              cancelButton: "btn btn-danger",
                            },
                            buttonsStyling: false,
                          });

                          swalWithBootstrapButtons
                            .fire({
                              title: "คุณต้องการยืนยันการจอง ?",
                              //text: "You won't be able to revert this!",
                              icon: "warning",
                              showCancelButton: true,
                              confirmButtonText: "ยืนยันการจอง",
                              cancelButtonText: "ยกเลิก",
                              reverseButtons: true,
                            })
                            .then((result) => {
                              if (result.isConfirmed) {
                                window.location.href = "/admin/rev/booked/" + id + "/" + userid;
                              }
                            });
                        }

                        function _delete(id, userid) {
                          const swalWithBootstrapButtons = Swal.mixin({
                            customClass: {
                              confirmButton: "btn btn-success",
                              cancelButton: "btn btn-danger",
                            },
                            buttonsStyling: false,
                          });

                          swalWithBootstrapButtons
                            .fire({
                              title: "คุณต้องการลบรายการนี้ ?",
                              //text: "You won't be able to revert this!",
                              icon: "warning",
                              showCancelButton: true,
                              confirmButtonText: "ยืนยัน",
                              cancelButtonText: "ยกเลิก",
                              reverseButtons: true,
                            })
                            .then((result) => {
                              if (result.isConfirmed) {
                                window.location.href = "/admin/rev/delete/" + id + "/" + userid;
                              }
                            });
                        }
                        new Vue({
                          el: "#app",
                          data() {
                            return {
                              edit_id: '',
                              delete_id: '',
                              edit_member_name: '',
                              edit_birthdate:'',
                              edit_facebook_name_a: '',
                              edit_facebook_name_b: '',
                              edit_facebook_name_c: '',
                              edit_member_email: '',
                              edit_member_telno: '',
                              edit_member_address: '',
                              edit_sec_member_address: '',
                              edit_member_totalprice: 0,
                              edit_member_detail: '',
                              check: false,
                              member_name: '',
                              member_email: '',
                              member_telno: '',
                              member_address: '',
                              sec_member_address: '',
                              member_detail: '',
                              facebook_name_a: '',
                              facebook_name_b: '',
                              facebook_name_c: '',
                              membername: '',
                              productsize: '',
                              productname: '',
                              productdetail: '',
                              category: '',
                              productcode: '',
                              productprice: 0,
                              totalprice: 0,
                              status: '',
                              displayName: 'fff',
                              userId: '',
                              pictureUrl: '',
                              temail: '',
                              qrcode: '',
                              id: 0,
                              all_order: [{
                                order_id: 0
                              }],
                              row: ''
                            }
                          },
                          created() {
                            // this.loadUsers();
                          },
                          methods: {
                            isNumber: function (evt) {
                              evt = (evt) ? evt : window.event;
                              var charCode = (evt.which) ? evt.which : evt.keyCode;
                              if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {
                                evt.preventDefault();;
                              } else {
                                return true;
                              }
                            },
                            async deleteMember(id) {
                              const swalWithBootstrapButtons = Swal.mixin({
                                customClass: {
                                  confirmButton: "btn btn-success",
                                  cancelButton: "btn btn-danger",
                                },
                                buttonsStyling: false,
                              });

                              swalWithBootstrapButtons
                                .fire({
                                  title: "คุณต้องการยืนยันการลบข้อมูลสมาชิก ?",
                                  //text: "You won't be able to revert this!",
                                  icon: "warning",
                                  showCancelButton: true,
                                  confirmButtonText: "ยืนยัน",
                                  cancelButtonText: "ยกเลิก",
                                  reverseButtons: true,
                                })
                                .then((result) => {
                                  if (result.isConfirmed) {
                                    window.location.href = "/member/del/" + id;
                                  }
                                });
                            },

                            async editMember(id, member_name, birthdate, facebook_name_a, facebook_name_b, facebook_name_c, member_email, member_telno,
                              member_address, sec_member_address, member_totalprice, member_detail) {
                              this.edit_id = id;
                              this.edit_birthdate = birthdate;
                              this.edit_member_name = member_name;
                              this.edit_facebook_name_a = facebook_name_a;
                              this.edit_facebook_name_b = facebook_name_b;
                              this.edit_facebook_name_c = facebook_name_c;
                              this.edit_member_email = member_email;
                              this.edit_member_telno = member_telno;
                              this.edit_member_address = member_address;
                              this.edit_sec_member_address = sec_member_address;
                              this.edit_member_totalprice = parseInt(member_totalprice);
                              this.edit_member_detail = member_detail;
                              $('#editModal').modal('show')
                              // $('#editModal').modal('show');
                            },

                            async _upload() {
                              var od_id = 0;
                              Papa.parse(document.getElementById('upload-csv').files[0], {
                                download: true,
                                header: false,
                                complete: function (results) {
                                  console.log('======results======')
                                  var empty = 0;
                                  var data_empty = 0;
                                  check();

                                  function check() {
                                    for (let i = 0; i < results.data.length; i++) {
                                      if (results.data[i][0] == "" && results.data[i][1] == "" && empty == 0) {
                                        empty = i
                                      }
                                      if(results.data[i][0]=="" && results.data[i][1] != undefined ){
                                        data_empty = 1
                                      }else if(results.data[i][0]=="" && results.data[i][5]!= null){
                                        data_empty = 1
                                      }else if(results.data[i][0]=="" && results.data[i][2]!= null){
                                        data_empty = 1
                                      }
                                      if(results.data[i][1]==""){
                                        data_empty = 1
                                      }
                                      if(results.data[i][2]==""){
                                        data_empty = 1
                                      }
                                      if(results.data[i][5]==""){
                                        data_empty = 1
                                      }
                                    }
                                  }
                                  if(data_empty!=0){
                                  console.log("Data emp : "+data_empty)
                                  console.log("Emp : "+empty)
                                    console.log('ติด')
                                    Swal.fire(
                                      'ข้อมูลจำเป็นของคุณไม่ครบถ้วน?',
                                      'กรุณาตรวจสอบข้อมูลของท่าน',
                                      'warning'
                                    )
                        
                                  }else{
                                    console.log('เข้าครับ')
                                    axios.post('/member/importmember', {
                                      data: results,
                                      row: empty
                                    })
                                    .then((response) => {
                                      console.log(response);
                                      if (response.status == 200) {
                                        window.location.href = "/member";
                                      }
                                    }, (error) => {
                                      console.log(error);
                                    });
                                  }
                                
                                  console.log('======results======')
                                }
                              });
                            }
                          }
                        })
                      </script>
</body>

</html>